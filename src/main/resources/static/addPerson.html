<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MineDays | 注册</title>
    <!-- 新 Bootstr 核心 CSS 文件 --><link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <!-- 可选的Bootstrap主题文件（一般不使用） --><script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap-theme.min.css"></script>
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 --><script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 --><script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
        h1{font-family:Serif;}
        h2{font-family:Sans-serif ;}
        h3{font-family:Monospace;}
        h3.normal {font-weight: normal}
        h3.thick {font-weight: bold}
        h3.thicker {font-weight: 600}
        h4{font-family:Cursive;}
        h5{font-family:Fantasy;}
    </style>
    <script type="text/javascript">
        function toLogin(){
            var name = document.getElementById("exampleInputUsername").value;
            var gen  = document.getElementById("selectGen").value;
            var json
            json={userName:name,gender:gen}
            $.ajax({
                url: 'addPerson',
                type: "POST",
                data: JSON.stringify(json),
                //dataType:"json",
                success: function (data) {
                    if(data=="SUCCESS"){
                        alert("信息提交成功！正在为您跳转登陆");
                        window.location.href="login.html"
                    } else {
                        alert("抱歉！遭遇异常，请稍后再试。")
                    }
                },
                contentType: "application/json;charset=UTF-8"
            });
            //1)GET 请求发送的并不是JSON字符串，jquery会给他转成url的请求参数
            //2）traditonal：true 不能省，这是防止浏览器将集合参数名为"favs[]"这样后台会报错
            //3）POST请求的JSON.stringify不能省略
            //4）至于contentType大家都说不能省，但是我发现还是可以省略的（chrome浏览器测试的）
        }
    </script>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">

            <div class="row">
                <div class="col-md-4">
                </div>
                <div class="col-md-4">
                    <h3>
                        请先填写完整的用户信息
                    </h3>
                    <form role="form">
                        <div class="form-group">

                            <label for="exampleInputUsername">
                                用户名：
                            </label>
                            <input type="email" class="form-control" id="exampleInputUsername" />
                        </div>

                        <div class="form-group">

                            <label>
                                性别：
                            </label>
                            <select id = "selectGen">
                                <option value ="fuck">男</option>
                                <option value ="fucked">女</option>
                            </select>
                        </div>

                        <button type="button" class="btn btn-primary" onclick="toLogin()">
                            OK，去登陆！
                        </button>
                    </form>
                </div>
                <div class="col-md-4">
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>